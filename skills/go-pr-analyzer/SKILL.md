---
name: go-pr-analyzer
description: |
  golang/go の PR を分析し、Go の設計思想・哲学を抽出するスキル。
  ユーザーが「PR を分析」「Go の思想を教えて」「なぜこの変更が入ったか」などと言った場合に使用。
allowed-tools:
  - Bash
  - WebFetch
  - Read
---

# Go PR Analyzer

golang/go の PR から Go の設計思想・哲学・ベストプラクティスを分析・抽出します。

## 分析の観点

### 1. 変更の背景・動機

PR の説明文やコメントから以下を抽出：

- なぜこの変更が必要だったか
- どのような問題を解決するか
- 既存の代替案と比較してなぜこの方法が選ばれたか

### 2. レビューの議論ポイント

レビューコメントから以下を抽出：

- どのような点が議論されたか
- 承認されるまでに何が修正されたか
- レビュアーが重視した品質基準

### 3. Go の設計思想との関連

変更内容を Go の設計思想と照らし合わせ：

- **シンプルさ**: 複雑さを減らす変更か
- **明示性**: 暗黙の動作を避けているか
- **直交性**: 独立した機能の組み合わせか
- **実用性**: 実際のユースケースに基づいているか

### 4. カテゴリ分類

PR を以下のカテゴリに分類：

| カテゴリ | 説明 |
|----------|------|
| `error-handling` | エラー処理の改善 |
| `performance` | パフォーマンス最適化 |
| `api-design` | API 設計の変更 |
| `testing` | テストの追加・改善 |
| `documentation` | ドキュメント更新 |
| `tooling` | ツールチェーンの改善 |
| `runtime` | ランタイムの変更 |
| `compiler` | コンパイラの改善 |

## 分析手順

### Step 1: PR 情報の取得

```bash
# PR の詳細を取得
gh pr view <PR_NUMBER> --repo golang/go --json number,title,body,state,author,labels,comments,reviews

# コメント・議論を取得
gh pr view <PR_NUMBER> --repo golang/go --comments

# 変更内容を取得
gh pr diff <PR_NUMBER> --repo golang/go
```

### Step 2: 分析の実行

取得した情報から以下を分析：

1. **Issue との関連**: `Fixes #XXXX` などから関連 Issue を特定
2. **変更の規模**: 追加/削除行数、影響ファイル数
3. **レビュー回数**: 承認までの修正回数
4. **議論の深さ**: コメント数、返信スレッド

### Step 3: 洞察の抽出

分析結果から Go の思想を言語化：

```markdown
## Go 思想の洞察

この PR は「<Go の原則>」を体現しています。

**具体的には:**
- <変更内容> が <原則> に沿っている理由
- レビューで <点> が重視された背景

**学べること:**
- <実践的なアドバイス>
```

## 出力フォーマット

```markdown
# PR #<number> 分析: <title>

## 概要
<PR の目的と変更内容の要約>

## 変更の背景
<なぜこの変更が必要だったか>

## 議論のポイント
<レビューで議論された重要な点>

## Go 思想との関連
<この変更が体現する Go の設計思想>

## カテゴリ
<category>

## 学べること
<この PR から学べる実践的な知見>
```
